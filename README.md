# ContainSentry

**ContainSentry** — прототип инструмента, разрабатываемого в рамках выпускной квалификафикационной работы магистра на тему:

**«Разработка методики создания и эксплуатации безопасных контейнеров»**.

Идея проекта — предоставить воспроизводимый, формализованный и автоматизируемый способ проверки того, что контейнерные артефакты и практики их подготовки соответствуют требованиям методики безопасности на этапах жизненного цикла (с фокусом на ранних этапах, где нарушения дешевле устранять).

---

## Концепция и связь с методологией

ContainSentry реализует прикладную часть методики: переводит требования безопасности из текстового вида в набор формализованных проверок, которые могут применяться в инженерном процессе (локально и в CI/CD).

Инструмент ориентирован на следующие принципы:

1. **Воспроизводимость проверок**  
   Один и тот же набор требований должен одинаково интерпретироваться и выполняться в разных проектах и окружениях.

2. **Формализация “риск → контроль → рекомендация”**  
   Каждое нарушение фиксируется как отклонение от контроля, которому сопоставлены риск и корректирующее действие.

3. **Трассируемость результатов**  
   Результаты должны быть привязаны к исходным артефактам (файлам и строкам), чтобы сокращать время анализа и исправления.

4. **Приоритизация**  
   Отклонения классифицируются по критичности, чтобы поддерживать режим “gating-контроля” для обязательных требований.

5. **Расширяемость**  
   Архитектура предполагает добавление новых контролей и источников данных без изменения уже реализованных правил.

---

## Архитектура (логическая)

ContainSentry построен как конвейер:

1. **Collectors (сбор и разбор артефактов)**  
   Извлечение структуры и метаданных из входных файлов (например, Dockerfile), включая позиции строк и контекст.

2. **IR (внутреннее представление)**  
   Нормализованная модель (например, `Stage`, `Instruction`, `Span`), независимая от конкретной библиотеки парсинга.

3. **Policy Engine (движок правил)**  
   Набор формализованных проверок (политик), каждая из которых возвращает нарушения с классификацией критичности.

4. **Reporting (отчётность)**  
   Генерация человекочитаемых и машинно-обрабатываемых отчётов для ревью и интеграций.

---

## Установка

### Требования
- Go ≥ 1.22 (рекомендуется актуальная версия).

---

## Сборка из исходников

```bash
git clone github.com/katvixlab/contain-sentry
cd contain-sentry
go build -o containsentry ./cmd/containsentry
./containsentry --help